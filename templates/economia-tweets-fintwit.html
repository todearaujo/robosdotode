{% extends 'base.html' %}

{% block title %}Editor de /economia - #fintwit{% endblock %}

{% block metadescription %}30 tweets mais engajados na #fintwitbr{% endblock %}

{% set manifest = "economia.webmanifest" %}

{% block metatags %}
<link href="/static/sites.css" rel="stylesheet">
{% endblock %}

<!-- Page specific CSS. Render inside base.html <style> -->
{% block style %}{% endblock %}
<!-- End of page specific CSS -->

<!-- Menu blocks -->
{% block inferior %}
{% endblock %}

{% block superior %}
<div class="imgrobo">
  <a onclick="loading()" href="/"><img alt="Robô" width="30px" height="30px" src="/static/384.png"></a>/economia/tweets/fintwit
</div>
<div id="descricao">Maior engajamento na #fintwitbr</div>
<div id="barra">
  <a onclick="loading()" class="item inativo" href="{{ url_for('economia', secao='destaques') }}">/destaques</a>
  <a onclick="loading()" class="item inativo" href="{{ url_for('economia', secao='maislidas') }}">/maislidas</a>
  <a onclick="loading()" class="item ativo" href="{{ url_for('tweetsr', secao='fintwit') }}">/#fintwitbr</a>
  <a onclick="loading()" class="item semiativo" href="{{ url_for('tweetsr', secao='top30') }}">/top30</a>
  <a onclick="loading()" class="item inativo" href="{{ url_for('economia', secao='webstories') }}">/webstories</a>
</div>
{% endblock %}
<!-- End of menu blocks -->

{% block content %}
<!-- Here we render tweets using a loop that extract tweet's IDs from a dict -->
<div id="tweetscontainer">
  {% for ID in tweets %}
  <div id="{{ ID }}"></div>
  {% endfor %}
</div>

<script sync src="https://platform.twitter.com/widgets.js"></script>

<script>

  function tweetsfunc(){
    {% for ID in tweets %}
    twttr.widgets.createTweet('{{ ID }}',document.getElementById('{{ ID }}'),{lang:'pt'});
    {% endfor %}
  };
    
  tweetsfunc();

  let ntweets = 0

  twttr.events.bind('rendered',function (event) {
    ntweets++
    document.querySelector("#loadtext").innerHTML = ("Carregando " + ntweets + "/30");
    if (ntweets == 30){
      console.log('Status: Tweets carregados', event.target.id);
      carregada();
      console.log("Status: Página completa");
    }
  });

</script>
<!-- End of the loop -->
{% endblock %}

{% block interactive %}{% endblock %}
{% block complete %}console.log("Status: Tweets carregando");{% endblock %}